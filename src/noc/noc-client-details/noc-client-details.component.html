<div class="min-h-screen p-4">
  <!-- Header -->
  <div class="flex flex-col sm:flex-row sm:justify-between items-start gap-y-2 mb-6 md:px-20">
    <div class="flex gap-x-5 items-center justify-center">
      <button
        class="bg-white text-muted-foreground rounded-full h-8 w-8 flex items-center justify-center"
        (click)="onBack()"
      >
        <hlm-icon size="sm" name="lucideArrowLeft" />
      </button>
      <div class="flex items-start justify-center flex-row">
        <img
          class="w-12 h-12 rounded-full mr-4"
          src="/bua-logo.svg"
          alt="Logo"
        />
        <div>
          <h4 class="text-md font-bold text-05004E">
						{{selectedCompanyVehicles()?.company_name}}
					</h4>
          <!-- <p class="text-sm text-A3AED0">{{ "info@buagroup.com" }}</p> -->
        </div>
      </div>
    </div>
    <div class="flex items-end justify-end max-sm:w-full">
      <button
        class="px-2 py-2 bg-transparent border border-C3D3E2 text-black rounded-lg flex justify-center items-center gap-1"
        (click)="onReport()"
      >
        <img src="/document-text.svg" alt="" />
        <span class="text-xs text-05004E">Report Dashboard</span>
      </button>
    </div>
  </div>

  <!-- Global Report Cards -->
  <div class="overflow-x-auto mb-6 md:ps-20">
    <div class="flex space-x-4 bg-white p-3 rounded-lg">
      <label
        for="total"
        [ngClass]="{ 'border-black': selectedStatus === 'Total Vehicle' }"
        class="flex items-center bg-blue-100 p-4 rounded-lg min-w-[200px] cursor-pointer border-2"
      >
        <input
          id="total"
          type="radio"
          name="vehicleStatus"
          class="hidden peer"
          (change)="onStatusChange('Total Vehicle')"
        />
        <div class="bg-blue-500 p-3 rounded-lg">
          <img src="/truck-fast.svg" alt="" />
        </div>
        <div class="ml-4">
          <p class="text-sm text-gray-600">Total Vehicle</p>
          <p class="text-2xl font-bold">822</p>
        </div>
      </label>
      <label
        for="moving"
        [ngClass]="{ 'border-black': selectedStatus === 'Moving Vehicles' }"
        class="flex items-center bg-green-100 p-4 rounded-lg min-w-fit cursor-pointer border-2"
      >
        <input
          id="moving"
          type="radio"
          name="vehicleStatus"
          class="hidden peer"
          (change)="onStatusChange('Moving Vehicles')"
        />
        <div class="bg-green-500 p-3 rounded-lg">
          <img src="/truck-fast.svg" alt="" />
        </div>
        <div class="ml-4">
          <p class="text-sm text-gray-600">Moving Vehicles</p>
          <p class="text-2xl font-bold">251</p>
        </div>
      </label>
      <label
        for="idle"
        [ngClass]="{ 'border-black': selectedStatus === 'Idle Vehicle' }"
        class="flex items-center bg-yellow-100 p-4 rounded-lg min-w-[200px] cursor-pointer border-2"
      >
        <input
          id="idle"
          type="radio"
          name="vehicleStatus"
          class="hidden peer"
          (change)="onStatusChange('Idle Vehicle')"
        />
        <div class="bg-yellow-500 p-3 rounded-lg">
          <img src="/truck-fast.svg" alt="" />
        </div>
        <div class="ml-4">
          <p class="text-sm text-gray-600">Idle Vehicle</p>
          <p class="text-2xl font-bold">41</p>
        </div>
      </label>
      <label
        for="off"
        [ngClass]="{ 'border-black': selectedStatus === 'Ignition off' }"
        class="flex items-center bg-purple-100 p-4 rounded-lg min-w-[200px] cursor-pointer border-2"
      >
        <input
          id="off"
          type="radio"
          name="vehicleStatus"
          class="hidden peer"
          (change)="onStatusChange('Ignition off')"
        />
        <div class="bg-purple-500 p-3 rounded-lg">
          <img src="/truck-fast.svg" alt="" />
        </div>
        <div class="ml-4">
          <p class="text-sm text-gray-600">Ignition off</p>
          <p class="text-2xl font-bold">190</p>
        </div>
      </label>
      <label
        for="disconnected"
        [ngClass]="{ 'border-black': selectedStatus === 'Disconnected' }"
        class="flex items-center bg-red-100 p-4 rounded-lg min-w-[200px] cursor-pointer border-2"
      >
        <input
          id="disconnected"
          type="radio"
          name="vehicleStatus"
          class="hidden peer"
          (change)="onStatusChange('Disconnected')"
        />
        <div class="bg-red-500 p-3 rounded-lg">
          <img src="/truck-fast.svg" alt="" />
        </div>
        <div class="ml-4">
          <p class="text-sm text-gray-600">Disconnected</p>
          <p class="text-2xl font-bold">12</p>
        </div>
      </label>
      <label
        for="signal"
        [ngClass]="{ 'border-black': selectedStatus === 'No Signal' }"
        class="flex items-center bg-gray-200 p-4 rounded-lg min-w-[200px] cursor-pointer border-2"
      >
        <input
          id="signal"
          type="radio"
          name="vehicleStatus"
          class="hidden peer"
          (change)="onStatusChange('No Signal')"
        />
        <div class="bg-gray-500 p-3 rounded-lg">
          <img src="/truck-fast.svg" alt="" />
        </div>
        <div class="ml-4">
          <p class="text-sm text-gray-600">No Signal</p>
          <p class="text-2xl font-bold">497</p>
        </div>
      </label>
    </div>
  </div>

  <!-- Table -->
  <div class="flex flex-col sm:flex-row sm:justify-between items-start gap-y-2 mb-6 md:px-20">
    <div class="text-xs md:text-lg font-bold text-green-600">
      <!-- Daily Issues Detected (50) -->
    </div>
    <div class="flex tems-end justify-end max-sm:w-full space-x-4">
      <button
        hlmBtn
        variant="outline"
        class="flex gap-1 justify-center items-center px-2 py-2 bg-white text-gray-700 rounded-md"
        size="sm"
      >
        <hlm-icon class="size-3.5" name="lucideFilter" />
        <span class="text-xs md:text-sm">Filter</span>
      </button>
      <brn-popover sideOffset="5" closeDelay="100">
        <button
          hlmBtn
          variant="outline"
          class="flex gap-1 justify-center items-center px-2 py-2 bg-white text-gray-700 rounded-md"
          size="sm"
          brnPopoverTrigger
        >
          <hlm-icon class="size-3.5" name="lucideChevronsUpDown" />
          <span class="text-xs md:text-sm">Sort by</span>
        </button>
        <!-- <div
          hlmPopoverContent
          class="w-80 grid gap-4"
          *brnPopoverContent="let ctx"
        >
          <div class="space-y-2">
            <h4 class="font-medium leading-none">Sort by</h4>
            <p class="text-sm text-muted-foreground">
              Kindly select what you want to filter
            </p>
          </div>
          <div class="grid gap-2">
            <small hlmSmall class="font-semibold">Priority</small>
            <brn-radio-group
              class="mb-4 font-mono text-sm font-medium space-y-1"
              hlm
            >
              <brn-radio hlm value="URGENT">
                <hlm-radio-indicator indicator />
                Urgent
              </brn-radio>
              <brn-radio hlm value="HIGH">
                <hlm-radio-indicator indicator />
                High
              </brn-radio>
              <brn-radio hlm value="MEDIUM">
                <hlm-radio-indicator indicator />
                Medium
              </brn-radio>
              <brn-radio hlm value="LOW">
                <hlm-radio-indicator indicator />
                Low
              </brn-radio>
            </brn-radio-group>
          </div>
          <div class="flex gap-2">
            <button hlmBtn brnPopoverClose variant="outline" class="gap-2 w-full">
              Cancel
            </button>
            <button hlmBtn class="gap-2 w-full">Sort</button>
          </div>
        </div> -->
      </brn-popover>

      <button class="px-4 py-2 bg-primary text-white rounded-md text-sm flex justify-center items-center gap-x-1" (click)="openDynamicComponent()">
        <span class="text-xs">Contact Client</span> 
        <hlm-icon size="sm" name="lucidePhoneCall" size="10" />
      </button>
    </div>
  </div>

  <div class="md:px-20 overflow-auto h-[45vh] md:max-h-[100vh]">
    <table class="min-w-full">
      <thead class="bg-white">
        <tr class="border-b-8 border-b-gray-50">
          <th class="p-3 text-left text-sm font-semibold text-gray-600 rounded-l-full">
            Truck Details
          </th>
          <th class="p-3 text-left text-sm font-semibold text-gray-600">
            No of tanks
          </th>
          <th class="p-3 text-left text-sm font-semibold text-gray-600">
            Battery voltage
          </th>
          <th class="p-3 text-left text-sm font-semibold text-gray-600">
            Main tank
          </th>
          <th class="p-3 text-left text-sm font-semibold text-gray-600">
            Reserve tank
          </th>
					<th class="p-3 text-left text-sm font-semibold text-gray-600">
            Device Installed
          </th>
					<th class="p-3 text-left text-sm font-semibold text-gray-600">
            SIM Info
          </th>

					<th class="p-3 text-left text-sm font-semibold text-gray-600">
            Installation date
          </th>
          <th
            class="p-3 text-left text-sm font-semibold text-gray-600 rounded-r-full"
          >
            Actions
          </th>
        </tr>
      </thead>
      <tbody class="">
        <!-- Repeat this row for each entry -->
				@for (item of selectedCompanyVehicles()?.vehicles; track $index) {
					<tr class="bg-white mb-4 border-b-8 border-b-gray-50">
						<td class="p-3 text-sm text-gray-700 rounded-l-2xl">
							<div class="flex flex-row items-center justify-center gap-x-1">
								<div class="bg-DFEFE9 w-fit p-2 rounded-md">
									<img
										src="/truck.svg"
										alt=""
										class="size-6 inline-block"
									/>
								</div>
								<div class="flex flex-col">
									<span class="">{{item.plate_number}}</span>
									<!-- <span class="text-gray-400">Plate XRTWST</span> -->
								</div>
							</div>
						</td>
						<td class="p-3 text-sm text-gray-700">
							{{item.no_of_tanks}}
						</td>
						<td class="p-3 text-sm text-gray-700">
							{{item.battery_voltage}}V
						</td>
						<td class="p-3 text-sm text-gray-700">
							{{item.calibrated_main_tank_capacity}} litres
						</td>
						<td class="p-3 text-sm text-gray-700">
							{{item.calibrated_reserve_tank_capacity}} litres
						</td>
						<td class="p-3 text-sm text-gray-700">
							{{item.device_name}}
						</td>
						<td class="p-3 text-sm text-gray-700">
							<div class="flex flex-col">
								<span class="">
									@if (item.sim_number) {
										{{'+'+item.sim_number}}
									} @else if (item.tracker_sim_number) {
										{{'+'+item.tracker_sim_number}}
									} @else {
										----
									}
								</span>
								<span class="text-gray-400">
									@if (item.sim_serial_number) {
										{{item.sim_serial_number}}
									} @else if (item.tracker_sim_serial_number) {
										{{item.tracker_sim_serial_number}}
									} @else {
										----
									}
								</span>
							</div>
						</td>
						<td class="p-3 text-sm text-gray-700">
							{{item.date_of_installation_completion | date}}
						</td>
						<td class="p-3 text-sm text-gray-700 rounded-r-2xl">
							<div class="flex items-center justify-center">
								<button hlmBtn class="bg-transparent text-black hover:bg-transparent">...</button>
								<!-- <button hlmBtn class="bg-transparent text-black hover:bg-transparent" [brnMenuTriggerFor]="menu">...</button> -->
							</div>
							<ng-template #menu>
								<hlm-menu class="w-56">
									<hlm-menu-group>
										<button hlmMenuItem>
											<hlm-icon name="lucideFileBarChart" hlmMenuIcon />
											<span>Preview</span>
											<hlm-menu-shortcut>⇧⌘P</hlm-menu-shortcut>
										</button>
									</hlm-menu-group>
								</hlm-menu>
							</ng-template>
						</td>
					</tr>
				}
        <!-- Repeat ends -->
      </tbody>
    </table>
  </div>
  <div
    class="flex flex-col sm:flex-row md:justify-between items-center p-4 bg-gray-50 md:mx-20"
  >
    <p class="text-sm text-gray-600">Showing 1 to 10 of 50 entries</p>
    <div>
      <nav hlmPagination class="block justify-end mx-auto w-fit">
        <ul hlmPaginationContent>
          <li hlmPaginationItem>
            <hlm-pagination-previous link="/components/menubar" />
          </li>
          <li hlmPaginationItem>
            <a hlmPaginationLink link="#" isActive>1</a>
          </li>
          <li hlmPaginationItem>
            <a hlmPaginationLink link="#">2</a>
          </li>
          <li hlmPaginationItem>
            <a hlmPaginationLink link="#">3</a>
          </li>
          <li hlmPaginationItem>
            <hlm-pagination-ellipsis />
          </li>
          <li hlmPaginationItem>
            <hlm-pagination-next link="/components/popover" />
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
